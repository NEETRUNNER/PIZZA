import{s as Me,b as Ce,r as l,a as ke,c as J,o as Ke,j as s,q as Qe,L as et,m as tt,R as h,f as at,u as nt,G as rt,d as it,t as st}from"./index-Pk0vqiB6.js";import{L as ot,F as lt}from"./index-BqPSM1dO.js";const ct=()=>{const{pizzaData:d,additionalData:t}=Me(),u=Ce(),[n,c]=l.useState([]),[p]=l.useState(!0),{pizzaTitle:v}=ke(),x=d.find(g=>J(g.pizza_title,{lower:!0,locale:"ru"})===v),m=Math.floor(Math.random()*(d.length-4)),z=t.filter(g=>g.pizza_title!==(x==null?void 0:x.pizza_title)).slice(m,m+4),a=Ke(p,{from:{transform:"rotateY(90deg)",opacity:0},enter:{transform:"rotateY(0deg)",opacity:1},leave:{transform:"rotateY(90deg)",opacity:0},config:{duration:300}});return l.useEffect(()=>{c(z)},[t,u.pathname]),a((g,b)=>b&&s.jsx("div",{className:"tips-pizza",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h2",{className:"md:text-2xl xs:text-xl font-bold mb-6 text-black font-nunito",children:"Рекомендації"}),s.jsx("div",{className:"flex flex-wrap gap-x-8",children:n.map((_,E)=>s.jsx(Qe.div,{style:g,className:"w-72 md:mx-0 xs:mx-auto",children:s.jsxs(et,{to:`/pizza-product/${J(_.pizza_title,{lower:!0,locale:"ru"})}`,className:"block bg-white shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[s.jsx("img",{src:_.pizza_img,alt:_.pizza_title,className:"w-full object-cover"}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"md:text-lg xs:text-xm font-semibold text-black mb-2",children:_.pizza_title}),s.jsxs("p",{className:"text-gray-600",children:[_.pizza_price," грн"]}),s.jsxs("p",{className:"text-sm text-gray-500",children:[_.pizza_weight," г"]})]})]},E)},E))})]})}))};var U={exports:{}},V,Pe;function ut(){if(Pe)return V;Pe=1;var d="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return V=d,V}var G,De;function dt(){if(De)return G;De=1;var d=ut();function t(){}function u(){}return u.resetWarningCache=t,G=function(){function n(v,x,m,z,a,g){if(g!==d){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}n.isRequired=n;function c(){return n}var p={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:c,element:n,elementType:n,instanceOf:c,node:n,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:u,resetWarningCache:t};return p.PropTypes=p,p},G}var Ne;function pt(){return Ne||(Ne=1,U.exports=dt()()),U.exports}var mt=pt();const gt=tt(mt);function B(){return B=Object.assign||function(d){for(var t=1;t<arguments.length;t++){var u=arguments[t];for(var n in u)Object.prototype.hasOwnProperty.call(u,n)&&(d[n]=u[n])}return d},B.apply(this,arguments)}var Oe=function(t){var u=t.src,n=t.sources,c=t.width,p=t.height,v=t.hasSpacer,x=t.imgAttributes,m=t.isZoomed,z=t.fadeDuration,a=c&&p&&v;return h.createElement("div",{style:{paddingTop:a?p/c*100+"%":null}},n&&n.length>0?h.createElement("picture",null,n.map(function(g,b){return h.createElement(l.Fragment,{key:b},g.srcSet&&h.createElement("source",g))}),h.createElement("img",B({},x,{className:"iiz__img "+(x.className||"")+" "+(m?"iiz__img--hidden":"")+" "+(a?"iiz__img--abs":""),style:{transition:"opacity 0ms linear "+(m?z:0)+"ms, visibility 0ms linear "+(m?z:0)+"ms"},src:u,width:c,height:p}))):h.createElement("img",B({},x,{className:"iiz__img "+(x.className||"")+" "+(m?"iiz__img--hidden":"")+" "+(a?"iiz__img--abs":""),style:{transition:"opacity 0ms linear "+(m?z:0)+"ms, visibility 0ms linear "+(m?z:0)+"ms"},src:u,width:c,height:p})))};Oe.propTypes={};var K=function(t){var u=t.src,n=t.fadeDuration,c=t.top,p=t.left,v=t.isZoomed,x=t.onLoad,m=t.onDragStart,z=t.onDragEnd,a=t.onClose,g=t.onFadeOut;return h.createElement(l.Fragment,null,h.createElement("img",{className:"iiz__zoom-img "+(v?"iiz__zoom-img--visible":""),style:{top:c,left:p,transition:"opacity "+n+"ms linear, visibility "+n+"ms linear"},src:u,onLoad:x,onTouchStart:m,onTouchEnd:z,onMouseDown:m,onMouseUp:z,onTransitionEnd:g,draggable:"false",alt:""}),a&&h.createElement("button",{className:"iiz__btn iiz__close "+(v?"iiz__close--visible":""),style:{transition:"opacity "+n+"ms linear, visibility "+n+"ms linear"},onClick:a,"aria-label":"Zoom Out"}))};K.propTypes={};var Ie=function(t){var u=t.children,n=l.useState(function(){var p=document.createElement("div");return p.classList.add("iiz__zoom-portal"),p}),c=n[0];return l.useEffect(function(){return document.body.appendChild(c),function(){return document.body.removeChild(c)}},[c]),at.createPortal(u,c)};Ie.propTypes={children:gt.element};var ft=void 0,Fe=function(t){var u=t.moveType,n=u===void 0?"pan":u,c=t.zoomType,p=c===void 0?"click":c,v=t.src,x=t.sources,m=t.width,z=t.height,a=t.hasSpacer,g=t.imgAttributes,b=g===void 0?{}:g,_=t.zoomSrc,E=t.zoomScale,A=E===void 0?1:E,M=t.zoomPreload,P=t.fadeDuration,k=P===void 0?150:P,S=t.fullscreenOnMobile,D=t.mobileBreakpoint,O=D===void 0?640:D,I=t.hideCloseButton,W=t.hideHint,F=t.className,L=t.afterZoomIn,R=t.afterZoomOut,Y=l.useRef(null),y=l.useRef(null),r=l.useRef({}),Q=l.useState(M),Le=Q[0],X=Q[1],ee=l.useState(!1),w=ee[0],te=ee[1],ae=l.useState(!1),T=ae[0],ne=ae[1],re=l.useState(!1),C=re[0],ie=re[1],se=l.useState(!1),oe=se[0],le=se[1],ce=l.useState(!1),Re=ce[0],Ye=ce[1],ue=l.useState(!1),Xe=ue[0],q=ue[1],de=l.useState(n),N=de[0],pe=de[1],me=l.useState(0),Ze=me[0],ge=me[1],fe=l.useState(0),Be=fe[0],he=fe[1],Ae=function(e){X(!0),q(!1),p==="hover"&&!T&&xe(e)},We=function(){te(!0),ie(je(S,O)),pe("drag")},xe=function(e){if(T){w?I&&$(e):!Re&&we();return}w&&X(!0),y.current?(ze({target:y.current}),_e(e.pageX,e.pageY)):r.current.onLoadCallback=_e.bind(ft,e.pageX,e.pageY)},ze=function(e){var i=Ge(e.target,A);y.current=e.target,y.current.setAttribute("width",i.width),y.current.setAttribute("height",i.height),r.current.scaledDimensions=i,r.current.bounds=Te(Y.current,!1),r.current.ratios=Ve(r.current.bounds,i),r.current.onLoadCallback&&(r.current.onLoadCallback(),r.current.onLoadCallback=null)},ve=function(e){var i=e.pageX-r.current.offsets.x,f=e.pageY-r.current.offsets.y;i=Math.max(Math.min(i,r.current.bounds.width),0),f=Math.max(Math.min(f,r.current.bounds.height),0),ge(i*-r.current.ratios.x),he(f*-r.current.ratios.y)},qe=function(e){var i=typeof e.pageX=="number"?e.pageX:e.changedTouches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.changedTouches[0].pageY;r.current.offsets=H(i,f,y.current.offsetLeft,y.current.offsetTop),le(!0),w||(r.current.eventPosition={x:e.pageX,y:e.pageY})},Z=l.useCallback(function(o){o.stopPropagation();var e=typeof o.pageX=="number"?o.pageX:o.changedTouches[0].pageX,i=typeof o.pageY=="number"?o.pageY:o.changedTouches[0].pageY,f=e-r.current.offsets.x,j=i-r.current.offsets.y;f=Math.max(Math.min(f,0),(r.current.scaledDimensions.width-r.current.bounds.width)*-1),j=Math.max(Math.min(j,0),(r.current.scaledDimensions.height-r.current.bounds.height)*-1),ge(f),he(j)},[]),ye=function(e){if(le(!1),!w){var i=Math.abs(e.pageX-r.current.eventPosition.x),f=Math.abs(e.pageY-r.current.eventPosition.y);Ye(i>5||f>5)}},$e=function(e){N==="drag"&&T?ye(e):$(e)},$=function(e){!w&&e.target.classList.contains("iiz__close")||(!T||C||!k?be({},!0):q(!0)),we()},be=function(e,i){(i||e.propertyName==="opacity"&&Y.current.contains(e.target))&&((M&&w||!M)&&(y.current=null,r.current=Se(),X(!1)),te(!1),ie(!1),pe(n),q(!1))},He=function(e,i){r.current.offsets=H(window.pageXOffset,window.pageYOffset,-r.current.bounds.left,-r.current.bounds.top),ve({pageX:e,pageY:i})},Ue=function(e,i){var f=(e-(window.pageXOffset+r.current.bounds.left))*-r.current.ratios.x,j=(i-(window.pageYOffset+r.current.bounds.top))*-r.current.ratios.y;f=f+(C?(window.innerWidth-r.current.bounds.width)/2:0),j=j+(C?(window.innerHeight-r.current.bounds.height)/2:0),r.current.bounds=Te(Y.current,C),r.current.offsets=H(0,0,0,0),Z({changedTouches:[{pageX:f,pageY:j}],preventDefault:function(){},stopPropagation:function(){}})},_e=function(e,i){ne(!0),N==="drag"?Ue(e,i):He(e,i),L&&L()},we=function(){ne(!1),R&&R()},Se=function(){return{onLoadCallback:null,bounds:{},offsets:{},ratios:{},eventPosition:{},scaledDimensions:{}}},Te=function(e,i){return i?{width:window.innerWidth,height:window.innerHeight,left:0,top:0}:e.getBoundingClientRect()},H=function(e,i,f,j){return{x:e-f,y:i-j}},Ve=function(e,i){return{x:(i.width-e.width)/e.width,y:(i.height-e.height)/e.height}},je=function(e,i){return e&&window.matchMedia&&window.matchMedia("(max-width: "+i+"px)").matches},Ge=function(e,i){return{width:e.naturalWidth*i,height:e.naturalHeight*i}},Ee={src:_||v,fadeDuration:C?0:k,top:Be,left:Ze,isZoomed:T,onLoad:ze,onDragStart:N==="drag"?qe:null,onDragEnd:N==="drag"?ye:null,onClose:!I&&N==="drag"?$:null,onFadeOut:Xe?be:null};return l.useEffect(function(){r.current=Se()},[]),l.useEffect(function(){je(S,O)&&X(!1)},[S,O]),l.useEffect(function(){if(y.current){var o=w?"touchmove":"mousemove";oe?y.current.addEventListener(o,Z,{passive:!0}):y.current.removeEventListener(o,Z)}},[oe,w,Z]),h.createElement("figure",{className:"iiz "+(N==="drag"?"iiz--drag":"")+" "+(F||""),style:{width:m},ref:Y,onTouchStart:T?null:We,onClick:xe,onMouseEnter:w?null:Ae,onMouseMove:N==="drag"||!T?null:ve,onMouseLeave:w?null:$e},h.createElement(Oe,{src:v,sources:x,width:m,height:z,hasSpacer:a,imgAttributes:b,fadeDuration:k,isZoomed:T}),Le&&h.createElement(l.Fragment,null,C?h.createElement(Ie,null,h.createElement(K,Ee)):h.createElement(K,Ee)),!W&&!T&&h.createElement("span",{className:"iiz__btn iiz__hint"}))};Fe.propTypes={};const zt=()=>{const d=nt(),{pizzaPrice:t,selectedIngridients:u,pizzasForDelivery:n,selectedPizza:c,filteredPizzas:p}=Me(),[v,x]=l.useState(),{pizzaTitle:m}=ke(),z=Ce(),a=p.find(S=>J(S.pizza_title,{lower:!0,locale:"ru"})===m);console.log(a);const{addPizza:g,deletePizza:b,addToBasketCart:_,changePizzaPrice:E,resetPizzaCounter:A}=it.actions,{resetIngridientCounter:M}=st.actions,P=u.reduce((S,D)=>S+D.ingridient_price*D.ingridient_counter,0),k=(S,D,O,I,W,F,L,R)=>{d(_({pizza_title:S,pizza_counter:D,pizza_id:O,pizza_price:I,pizza_img:W,selectedIngridients:F,totalIngridientPrice:L,pizza_descr:R})),d(M())};return l.useEffect(()=>{d(A()),d(M())},[z.pathname]),l.useEffect(()=>{a!=null&&a.pizza_price&&d(E({pizza_price:a.pizza_price,pizza_counter:a.pizza_counter,ingridient_price:P}))},[a]),l.useEffect(()=>{console.log("Выбранные ингридиенты",u),console.log("Выбранные пиццы",c),console.log("Пиццы для заказа(уже в массиве корзины)",n)},[u,n,c]),l.useEffect(()=>{a&&x(a)},[a]),s.jsxs("section",{className:"pizza-item",children:[s.jsx("div",{className:"pizza-item__container md:w-3/4 xs:w-11/12 mx-auto my-12 flex justify-center",children:a&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"pizza-item__wrap flex justify-center gap-x-8 lg:flex-nowrap xm:flex-wrap xs:flex-wrap",children:[s.jsx(Fe,{src:a.pizza_img,className:"image-zoom",zoomType:"hover"}),s.jsxs("div",{className:"flex-col flex",children:[s.jsx("h1",{className:"pizza-item__wrap pizza-item__title text-black font-extrabold md:text-3xl xs:text-2xl mt-2 font-nunito uppercase",children:a.pizza_title}),s.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Традиційне тісто 40 см, ",a.pizza_weight," г"]}),s.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Кількість в порції: ",a==null?void 0:a.amount]}),s.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Склад: ",a.pizza_descr]}),s.jsxs("div",{className:"flex md:justify-start xm:justify-center xs:justify-center flex-wrap py-8 xs:gap-x-5 xs:gap-y-5 w-full",children:[s.jsxs("div",{className:"flex",children:[s.jsx("button",{disabled:a.pizza_counter===1,onClick:()=>d(b({pizza_title:a.pizza_title,pizza_counter:a.pizza_counter,pizza_id:a.id,pizza_price:a.pizza_price,totalIngridientPrice:P})),type:"button",className:"md:py-1 md:px-4 xs:py-1 xs:px-2 inline-flex justify-center items-center gap-2 -ml-px first:rounded-l-lg first:ml-0 last:rounded-r-lg border font-medium bg-white text-gray-900 align-middle hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 focus:ring-indigo-600 transition-all md:text-sm",children:s.jsx(ot,{})}),s.jsx("button",{type:"button",className:"md:py-1 md:px-4 xs:py-1 xs:px-3 inline-flex justify-center items-center gap-2 -ml-px first:rounded-l-lg first:ml-0 last:rounded-r-lg border font-medium bg-white text-gray-900 align-middle hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 transition-all text-sm",children:a.pizza_counter}),s.jsx("button",{onClick:()=>d(g({pizza_title:a.pizza_title,pizza_counter:a.pizza_counter,pizza_id:a.id,pizza_price:a.pizza_price,totalIngridientPrice:P})),type:"button",className:"md:py-1 md:px-4 xs:py-1 xs:px-2 inline-flex justify-center items-center gap-2 -ml-px first:rounded-l-lg first:ml-0 last:rounded-r-lg border font-medium bg-white text-gray-900 align-middle hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 focus:ring-indigo-600 transition-all text-sm",children:s.jsx(lt,{})})]}),s.jsxs("div",{className:"text-orange-500 md:px-2 md:py-2 xs:px-8 xs:py-3 tracking-widest uppercase font-normal md:text-2xl xs:text-xl flex justify-center items-center font-nunito",children:[t," грн"]}),s.jsxs("button",{onClick:()=>k(a.pizza_title,a.pizza_counter,a.id,a.pizza_price,a.pizza_img,u,P,a.pizza_descr),disabled:a.pizza_counter<=0,className:`px-6 py-4 md:w-max xs:w-full tracking-widest uppercase font-bold text-xs flex justify-center items-center font-nunito transition duration-300 ${a.pizza_counter<=0?"bg-transparent text-black border-[1px] border-neutral-500 shadow-[inset_0_0_0_2px_#616467] hover:bg-neutral-200 hover:text-black":"bg-gradient-to-r from-red-400 to-red-600 text-white shadow-lg hover:from-red-500 hover:to-red-700"}`,children:["Додати до кошику ",s.jsx(rt,{className:"ml-2",size:"2em"})]})]})]})]})})}),s.jsx("div",{className:"pizza-item__recommendations",children:s.jsx(ct,{})})]})};export{zt as default};
