import{w as x,n as e,L as p,V as u,W as g,A as h,S as f}from"./index-BjcF54ve.js";import{u as b}from"./index.esm-BT8QbtaF.js";const w=(t,a)=>{try{const s=t;localStorage.setItem(a,s)}catch(s){console.error("Ошибка сохранения в localStorage",s)}},y=()=>{const t=x(),{register:a,reset:s,handleSubmit:c,formState:{errors:r}}=b(),{getLoginToken:m}=g.actions,{toggleAlert:l}=h.actions,d=async i=>{s({email:"",password:""});try{const o=await u.post("https://pizza-backend.up.railway.app/auth/login",{email:i.email,password:i.password}),n=o.data.token;return n&&(t(m(n)),t(l({type:"login",value:!0})),w(n,"token")),o}catch(o){t(l({type:"badLogin",value:!0})),console.log(o)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"md:w-[400px] xs:w-[300px] max-w-md md:p-8 xs:p-4 bg-white shadow-lg rounded-lg",children:[e.jsx("h1",{className:"text-orange-500 md:text-3xl xs:text-2xl font-bold mb-8 text-center uppercase font-nunito",children:"Увійти до кабінету"}),e.jsxs("form",{onSubmit:c(d),className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700",children:"Email"}),e.jsx("input",{id:"email",type:"email",...a("email",{required:"Email обов'язковий",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,message:"Введіть корректний email"}}),placeholder:"Введіть email",className:"w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),r.email&&e.jsx("p",{className:"text-red-500 text-xs mt-2 font-nunito text-center",children:r.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700",children:"Пароль"}),e.jsx("input",{id:"password",type:"password",autoComplete:"on",...a("password",{required:"Пароль обов'язковий",pattern:{value:/^[a-zA-Zа-яА-ЯёЁ0-9_]{8,}$/,message:"Пароль не може бути менше 8 символів"}}),name:"password",placeholder:"Пароль",className:"w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),r.password&&e.jsx("p",{className:"text-red-500 text-xs mt-2 font-nunito text-center",children:r.password.message})]}),e.jsx(p,{className:"w-max block mx-auto !mt-0",to:"/registration",children:e.jsx("h1",{className:"md:text-base xs:text-xs text-sky-400 font-nunito text-center	font-semibold my-2",children:"Зареєструватися якщо не маєте аккаунт"})}),e.jsx("button",{type:"submit",className:"w-full bg-orange-500 text-white py-2 px-4 font-semibold md:text-lg xs:text-xm tracking-wider hover:bg-orange-600 !mt-0",children:"Увійти"})]})]})})},k=()=>{const{loginToken:t}=f();return e.jsx("section",{className:"registration flex items-center justify-center",children:e.jsx("div",{className:"registration-container w-11/12 flex flex-wrap justify-center gap-x-24 my-[10%]",children:t?e.jsx("div",{className:"text-black",children:"Успешная авторизация"}):e.jsx(y,{})})})};export{k as default};
