import{g as Ue,R as g,r as c,f as Ve,u as Ge,s as Je,a as Ke,b as Qe,c as et,j as l,G as tt,d as at,i as rt}from"./index-BQUBc9u8.js";import{L as nt,F as it}from"./index-CtAktIka.js";var $={exports:{}},H,De;function ot(){if(De)return H;De=1;var u="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return H=u,H}var U,Pe;function st(){if(Pe)return U;Pe=1;var u=ot();function t(){}function p(){}return p.resetWarningCache=t,U=function(){function r(y,h,a,f,z,v){if(v!==u){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}r.isRequired=r;function s(){return r}var d={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:p,resetWarningCache:t};return d.PropTypes=d,d},U}var je;function ct(){return je||(je=1,$.exports=st()()),$.exports}var lt=ct();const ut=Ue(lt);function X(){return X=Object.assign||function(u){for(var t=1;t<arguments.length;t++){var p=arguments[t];for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&(u[r]=p[r])}return u},X.apply(this,arguments)}var Me=function(t){var p=t.src,r=t.sources,s=t.width,d=t.height,y=t.hasSpacer,h=t.imgAttributes,a=t.isZoomed,f=t.fadeDuration,z=s&&d&&y;return g.createElement("div",{style:{paddingTop:z?d/s*100+"%":null}},r&&r.length>0?g.createElement("picture",null,r.map(function(v,S){return g.createElement(c.Fragment,{key:S},v.srcSet&&g.createElement("source",v))}),g.createElement("img",X({},h,{className:"iiz__img "+(h.className||"")+" "+(a?"iiz__img--hidden":"")+" "+(z?"iiz__img--abs":""),style:{transition:"opacity 0ms linear "+(a?f:0)+"ms, visibility 0ms linear "+(a?f:0)+"ms"},src:p,width:s,height:d}))):g.createElement("img",X({},h,{className:"iiz__img "+(h.className||"")+" "+(a?"iiz__img--hidden":"")+" "+(z?"iiz__img--abs":""),style:{transition:"opacity 0ms linear "+(a?f:0)+"ms, visibility 0ms linear "+(a?f:0)+"ms"},src:p,width:s,height:d})))};Me.propTypes={};var V=function(t){var p=t.src,r=t.fadeDuration,s=t.top,d=t.left,y=t.isZoomed,h=t.onLoad,a=t.onDragStart,f=t.onDragEnd,z=t.onClose,v=t.onFadeOut;return g.createElement(c.Fragment,null,g.createElement("img",{className:"iiz__zoom-img "+(y?"iiz__zoom-img--visible":""),style:{top:s,left:d,transition:"opacity "+r+"ms linear, visibility "+r+"ms linear"},src:p,onLoad:h,onTouchStart:a,onTouchEnd:f,onMouseDown:a,onMouseUp:f,onTransitionEnd:v,draggable:"false",alt:""}),z&&g.createElement("button",{className:"iiz__btn iiz__close "+(y?"iiz__close--visible":""),style:{transition:"opacity "+r+"ms linear, visibility "+r+"ms linear"},onClick:z,"aria-label":"Zoom Out"}))};V.propTypes={};var Ce=function(t){var p=t.children,r=c.useState(function(){var d=document.createElement("div");return d.classList.add("iiz__zoom-portal"),d}),s=r[0];return c.useEffect(function(){return document.body.appendChild(s),function(){return document.body.removeChild(s)}},[s]),Ve.createPortal(p,s)};Ce.propTypes={children:ut.element};var pt=void 0,Ne=function(t){var p=t.moveType,r=p===void 0?"pan":p,s=t.zoomType,d=s===void 0?"click":s,y=t.src,h=t.sources,a=t.width,f=t.height,z=t.hasSpacer,v=t.imgAttributes,S=v===void 0?{}:v,Z=t.zoomSrc,M=t.zoomScale,P=M===void 0?1:M,C=t.zoomPreload,T=t.fadeDuration,E=T===void 0?150:T,N=t.fullscreenOnMobile,I=t.mobileBreakpoint,O=I===void 0?640:I,k=t.hideCloseButton,B=t.hideHint,F=t.className,G=t.afterZoomIn,J=t.afterZoomOut,L=c.useRef(null),x=c.useRef(null),n=c.useRef({}),K=c.useState(C),Oe=K[0],R=K[1],Q=c.useState(!1),b=Q[0],ee=Q[1],te=c.useState(!1),_=te[0],ae=te[1],re=c.useState(!1),j=re[0],ne=re[1],ie=c.useState(!1),oe=ie[0],se=ie[1],ce=c.useState(!1),Ie=ce[0],ke=ce[1],le=c.useState(!1),Fe=le[0],A=le[1],ue=c.useState(r),D=ue[0],pe=ue[1],de=c.useState(0),Le=de[0],me=de[1],ge=c.useState(0),Re=ge[0],fe=ge[1],Ye=function(e){R(!0),A(!1),d==="hover"&&!_&&he(e)},Xe=function(){ee(!0),ne(Te(N,O)),pe("drag")},he=function(e){if(_){b?k&&W(e):!Ie&&_e();return}b&&R(!0),x.current?(ze({target:x.current}),be(e.pageX,e.pageY)):n.current.onLoadCallback=be.bind(pt,e.pageX,e.pageY)},ze=function(e){var i=$e(e.target,P);x.current=e.target,x.current.setAttribute("width",i.width),x.current.setAttribute("height",i.height),n.current.scaledDimensions=i,n.current.bounds=Se(L.current,!1),n.current.ratios=qe(n.current.bounds,i),n.current.onLoadCallback&&(n.current.onLoadCallback(),n.current.onLoadCallback=null)},ve=function(e){var i=e.pageX-n.current.offsets.x,m=e.pageY-n.current.offsets.y;i=Math.max(Math.min(i,n.current.bounds.width),0),m=Math.max(Math.min(m,n.current.bounds.height),0),me(i*-n.current.ratios.x),fe(m*-n.current.ratios.y)},Ze=function(e){var i=typeof e.pageX=="number"?e.pageX:e.changedTouches[0].pageX,m=typeof e.pageY=="number"?e.pageY:e.changedTouches[0].pageY;n.current.offsets=q(i,m,x.current.offsetLeft,x.current.offsetTop),se(!0),b||(n.current.eventPosition={x:e.pageX,y:e.pageY})},Y=c.useCallback(function(o){o.stopPropagation();var e=typeof o.pageX=="number"?o.pageX:o.changedTouches[0].pageX,i=typeof o.pageY=="number"?o.pageY:o.changedTouches[0].pageY,m=e-n.current.offsets.x,w=i-n.current.offsets.y;m=Math.max(Math.min(m,0),(n.current.scaledDimensions.width-n.current.bounds.width)*-1),w=Math.max(Math.min(w,0),(n.current.scaledDimensions.height-n.current.bounds.height)*-1),me(m),fe(w)},[]),xe=function(e){if(se(!1),!b){var i=Math.abs(e.pageX-n.current.eventPosition.x),m=Math.abs(e.pageY-n.current.eventPosition.y);ke(i>5||m>5)}},Be=function(e){D==="drag"&&_?xe(e):W(e)},W=function(e){!b&&e.target.classList.contains("iiz__close")||(!_||j||!E?ye({},!0):A(!0)),_e()},ye=function(e,i){(i||e.propertyName==="opacity"&&L.current.contains(e.target))&&((C&&b||!C)&&(x.current=null,n.current=we(),R(!1)),ee(!1),ne(!1),pe(r),A(!1))},Ae=function(e,i){n.current.offsets=q(window.pageXOffset,window.pageYOffset,-n.current.bounds.left,-n.current.bounds.top),ve({pageX:e,pageY:i})},We=function(e,i){var m=(e-(window.pageXOffset+n.current.bounds.left))*-n.current.ratios.x,w=(i-(window.pageYOffset+n.current.bounds.top))*-n.current.ratios.y;m=m+(j?(window.innerWidth-n.current.bounds.width)/2:0),w=w+(j?(window.innerHeight-n.current.bounds.height)/2:0),n.current.bounds=Se(L.current,j),n.current.offsets=q(0,0,0,0),Y({changedTouches:[{pageX:m,pageY:w}],preventDefault:function(){},stopPropagation:function(){}})},be=function(e,i){ae(!0),D==="drag"?We(e,i):Ae(e,i),G&&G()},_e=function(){ae(!1),J&&J()},we=function(){return{onLoadCallback:null,bounds:{},offsets:{},ratios:{},eventPosition:{},scaledDimensions:{}}},Se=function(e,i){return i?{width:window.innerWidth,height:window.innerHeight,left:0,top:0}:e.getBoundingClientRect()},q=function(e,i,m,w){return{x:e-m,y:i-w}},qe=function(e,i){return{x:(i.width-e.width)/e.width,y:(i.height-e.height)/e.height}},Te=function(e,i){return e&&window.matchMedia&&window.matchMedia("(max-width: "+i+"px)").matches},$e=function(e,i){return{width:e.naturalWidth*i,height:e.naturalHeight*i}},Ee={src:Z||y,fadeDuration:j?0:E,top:Re,left:Le,isZoomed:_,onLoad:ze,onDragStart:D==="drag"?Ze:null,onDragEnd:D==="drag"?xe:null,onClose:!k&&D==="drag"?W:null,onFadeOut:Fe?ye:null};return c.useEffect(function(){n.current=we()},[]),c.useEffect(function(){Te(N,O)&&R(!1)},[N,O]),c.useEffect(function(){if(x.current){var o=b?"touchmove":"mousemove";oe?x.current.addEventListener(o,Y,{passive:!0}):x.current.removeEventListener(o,Y)}},[oe,b,Y]),g.createElement("figure",{className:"iiz "+(D==="drag"?"iiz--drag":"")+" "+(F||""),style:{width:a},ref:L,onTouchStart:_?null:Xe,onClick:he,onMouseEnter:b?null:Ye,onMouseMove:D==="drag"||!_?null:ve,onMouseLeave:b?null:Be},g.createElement(Me,{src:y,sources:h,width:a,height:f,hasSpacer:z,imgAttributes:S,fadeDuration:E,isZoomed:_}),Oe&&g.createElement(c.Fragment,null,j?g.createElement(Ce,null,g.createElement(V,Ee)):g.createElement(V,Ee)),!B&&!_&&g.createElement("span",{className:"iiz__btn iiz__hint"}))};Ne.propTypes={};const gt=()=>{const u=Ge(),{pizzaData:t,pizzaPrice:p,selectedIngridients:r,pizzasForDelivery:s,selectedPizza:d}=Je(),{pizzaTitle:y}=Ke(),h=Qe(),a=t.find(T=>et(T.pizza_title,{lower:!0,locale:"ru"})===y),{addPizza:f,deletePizza:z,addToBasketCart:v,changePizzaPrice:S,resetPizzaCounter:Z}=at.actions,{resetIngridientCounter:M}=rt.actions,P=r.reduce((T,E)=>T+E.ingridient_price*E.ingridient_counter,0),C=(T,E,N,I,O,k,B,F)=>{u(v({pizza_title:T,pizza_counter:E,pizza_id:N,pizza_price:I,pizza_img:O,selectedIngridients:k,totalIngridientPrice:B,pizza_descr:F})),u(M())};return c.useEffect(()=>{u(Z()),u(M())},[h.pathname]),c.useEffect(()=>{a!=null&&a.pizza_price&&u(S({pizza_price:a.pizza_price,pizza_counter:a.pizza_counter,ingridient_price:P}))},[a]),c.useEffect(()=>{console.log("Выбранные ингридиенты",r),console.log("Выбранные пиццы",d),console.log("Пиццы для заказа(уже в массиве корзины)",s)},[r,s,d]),l.jsx("section",{className:"pizza-item",children:l.jsx("div",{className:"pizza-item__container md:w-3/4 xs:w-11/12 mx-auto my-12 flex justify-center",children:a&&l.jsx(l.Fragment,{children:l.jsxs("div",{className:"pizza-item__wrap flex justify-center gap-x-8 lg:flex-nowrap xm:flex-wrap xs:flex-wrap",children:[l.jsx(Ne,{src:a.pizza_img,className:"w-max-[700px] h-max"}),l.jsxs("div",{className:"flex-col flex",children:[l.jsx("h1",{className:"pizza-item__wrap pizza-item__title text-black font-extrabold md:text-3xl xs:text-2xl mt-2 font-nunito uppercase",children:a.pizza_title}),l.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Традиційне тісто 25 см, ",a.pizza_weight," г"]}),l.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Склад: ",a.pizza_descr]}),l.jsxs("div",{className:"flex md:justify-start xm:justify-center xs:justify-center flex-wrap py-8 xs:gap-x-5 xs:gap-y-5 w-full",children:[l.jsxs("div",{className:"flex",children:[l.jsx("button",{disabled:a.pizza_counter===1,onClick:()=>u(z({pizza_title:a.pizza_title,pizza_counter:a.pizza_counter,pizza_id:a.id,pizza_price:a.pizza_price,totalIngridientPrice:P,selectedIngridients:r})),type:"button",className:"md:py-2 md:px-4 xs:py-1 xs:px-2 inline-flex justify-center items-center gap-2 -ml-px first:rounded-l-lg first:ml-0 last:rounded-r-lg border font-medium bg-white text-gray-900 align-middle hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 focus:ring-indigo-600 transition-all md:text-sm",children:l.jsx(nt,{})}),l.jsx("button",{type:"button",className:"md:py-2 md:px-4 xs:py-1 xs:px-3 inline-flex justify-center items-center gap-2 -ml-px first:rounded-l-lg first:ml-0 last:rounded-r-lg border font-medium bg-white text-gray-900 align-middle hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 transition-all text-sm",children:a.pizza_counter}),l.jsx("button",{onClick:()=>u(f({pizza_title:a.pizza_title,pizza_counter:a.pizza_counter,pizza_id:a.id,pizza_price:a.pizza_price,totalIngridientPrice:P,selectedIngridients:r})),type:"button",className:"md:py-2 md:px-4 xs:py-1 xs:px-2 inline-flex justify-center items-center gap-2 -ml-px first:rounded-l-lg first:ml-0 last:rounded-r-lg border font-medium bg-white text-gray-900 align-middle hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 focus:ring-indigo-600 transition-all text-sm",children:l.jsx(it,{})})]}),l.jsxs("div",{className:"text-orange-500 md:px-6 md:py-2 xs:px-8 xs:py-3 tracking-widest uppercase font-normal md:text-2xl xs:text-xl flex justify-center items-center font-nunito",children:[p,"₴"]}),l.jsxs("button",{onClick:()=>C(a.pizza_title,a.pizza_counter,a.id,a.pizza_price,a.pizza_img,r,P,a.pizza_descr),disabled:a.pizza_counter<=0,className:`px-6 py-4 md:w-max xs:w-full tracking-widest uppercase font-bold text-xs flex justify-center items-center font-nunito transition duration-300 ${a.pizza_counter<=0?"bg-transparent text-black border-[1px] border-neutral-500 shadow-[inset_0_0_0_2px_#616467] hover:bg-neutral-200 hover:text-black":"bg-gradient-to-r from-red-400 to-red-600 text-white shadow-lg hover:from-red-500 hover:to-red-700"}`,children:["Додати до кошику ",l.jsx(tt,{className:"ml-2",size:"2em"})]})]})]})]})})})})};export{gt as default};
