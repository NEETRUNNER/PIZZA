import{r as c,s as Me,a as Ce,c as V,j as s,L as Je,i as Ke,R as h,f as Qe,u as et,b as tt,G as at,d as nt,k as rt}from"./index-DVmEWZX-.js";import{L as it,F as st}from"./index-CzstR95d.js";const ot=()=>{const[d,t]=c.useState([]),{pizzaData:p}=Me(),{pizzaTitle:n}=Ce(),l=p.find(u=>V(u.pizza_title,{lower:!0,locale:"ru"})===n),m=Math.floor(Math.random()*(p.length-4));console.log(m);const f=p.slice(m,m+4);if(console.log(f),console.log(d),c.useEffect(()=>{const u=setInterval(()=>{t(f)},2e4);return()=>clearInterval(u)},[d]),l!==void 0)if(f.includes(l)){const u=f.filter(a=>a!==l);t(u),console.log("Совпадение")}else console.log("Не нашло");return s.jsx("div",{className:"tips-pizza",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-black font-nunito",children:"Рекомендації"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:(d.length>0?d:f).map((u,a)=>s.jsxs(Je,{to:`/pizza-product/${V(u.pizza_title,{lower:!0,locale:"ru"})}`,className:"block bg-white shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[s.jsx("img",{src:u.pizza_img,alt:u.pizza_title,className:"w-full object-cover"}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"md:text-lg xs:text-xm font-semibold text-black mb-2",children:u.pizza_title}),s.jsxs("p",{className:"text-gray-600",children:[u.pizza_price," грн"]}),s.jsxs("p",{className:"text-sm text-gray-500",children:[u.pizza_weight," г"]})]})]},a))})]})})};var q={exports:{}},H,Pe;function lt(){if(Pe)return H;Pe=1;var d="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return H=d,H}var U,De;function ct(){if(De)return U;De=1;var d=lt();function t(){}function p(){}return p.resetWarningCache=t,U=function(){function n(f,u,a,x,z,v){if(v!==d){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}n.isRequired=n;function l(){return n}var m={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:l,element:n,elementType:n,instanceOf:l,node:n,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:p,resetWarningCache:t};return m.PropTypes=m,m},U}var Ne;function ut(){return Ne||(Ne=1,q.exports=ct()()),q.exports}var dt=ut();const pt=Ke(dt);function X(){return X=Object.assign||function(d){for(var t=1;t<arguments.length;t++){var p=arguments[t];for(var n in p)Object.prototype.hasOwnProperty.call(p,n)&&(d[n]=p[n])}return d},X.apply(this,arguments)}var ke=function(t){var p=t.src,n=t.sources,l=t.width,m=t.height,f=t.hasSpacer,u=t.imgAttributes,a=t.isZoomed,x=t.fadeDuration,z=l&&m&&f;return h.createElement("div",{style:{paddingTop:z?m/l*100+"%":null}},n&&n.length>0?h.createElement("picture",null,n.map(function(v,S){return h.createElement(c.Fragment,{key:S},v.srcSet&&h.createElement("source",v))}),h.createElement("img",X({},u,{className:"iiz__img "+(u.className||"")+" "+(a?"iiz__img--hidden":"")+" "+(z?"iiz__img--abs":""),style:{transition:"opacity 0ms linear "+(a?x:0)+"ms, visibility 0ms linear "+(a?x:0)+"ms"},src:p,width:l,height:m}))):h.createElement("img",X({},u,{className:"iiz__img "+(u.className||"")+" "+(a?"iiz__img--hidden":"")+" "+(z?"iiz__img--abs":""),style:{transition:"opacity 0ms linear "+(a?x:0)+"ms, visibility 0ms linear "+(a?x:0)+"ms"},src:p,width:l,height:m})))};ke.propTypes={};var G=function(t){var p=t.src,n=t.fadeDuration,l=t.top,m=t.left,f=t.isZoomed,u=t.onLoad,a=t.onDragStart,x=t.onDragEnd,z=t.onClose,v=t.onFadeOut;return h.createElement(c.Fragment,null,h.createElement("img",{className:"iiz__zoom-img "+(f?"iiz__zoom-img--visible":""),style:{top:l,left:m,transition:"opacity "+n+"ms linear, visibility "+n+"ms linear"},src:p,onLoad:u,onTouchStart:a,onTouchEnd:x,onMouseDown:a,onMouseUp:x,onTransitionEnd:v,draggable:"false",alt:""}),z&&h.createElement("button",{className:"iiz__btn iiz__close "+(f?"iiz__close--visible":""),style:{transition:"opacity "+n+"ms linear, visibility "+n+"ms linear"},onClick:z,"aria-label":"Zoom Out"}))};G.propTypes={};var Ie=function(t){var p=t.children,n=c.useState(function(){var m=document.createElement("div");return m.classList.add("iiz__zoom-portal"),m}),l=n[0];return c.useEffect(function(){return document.body.appendChild(l),function(){return document.body.removeChild(l)}},[l]),Qe.createPortal(p,l)};Ie.propTypes={children:pt.element};var mt=void 0,Oe=function(t){var p=t.moveType,n=p===void 0?"pan":p,l=t.zoomType,m=l===void 0?"click":l,f=t.src,u=t.sources,a=t.width,x=t.height,z=t.hasSpacer,v=t.imgAttributes,S=v===void 0?{}:v,Z=t.zoomSrc,N=t.zoomScale,P=N===void 0?1:N,M=t.zoomPreload,T=t.fadeDuration,j=T===void 0?150:T,C=t.fullscreenOnMobile,I=t.mobileBreakpoint,k=I===void 0?640:I,O=t.hideCloseButton,B=t.hideHint,F=t.className,J=t.afterZoomIn,K=t.afterZoomOut,L=c.useRef(null),y=c.useRef(null),r=c.useRef({}),Q=c.useState(M),Fe=Q[0],R=Q[1],ee=c.useState(!1),b=ee[0],te=ee[1],ae=c.useState(!1),_=ae[0],ne=ae[1],re=c.useState(!1),D=re[0],ie=re[1],se=c.useState(!1),oe=se[0],le=se[1],ce=c.useState(!1),Le=ce[0],Re=ce[1],ue=c.useState(!1),Ye=ue[0],A=ue[1],de=c.useState(n),E=de[0],pe=de[1],me=c.useState(0),Xe=me[0],ge=me[1],fe=c.useState(0),Ze=fe[0],he=fe[1],Be=function(e){R(!0),A(!1),m==="hover"&&!_&&xe(e)},Ae=function(){te(!0),ie(je(C,k)),pe("drag")},xe=function(e){if(_){b?O&&W(e):!Le&&we();return}b&&R(!0),y.current?(ze({target:y.current}),_e(e.pageX,e.pageY)):r.current.onLoadCallback=_e.bind(mt,e.pageX,e.pageY)},ze=function(e){var i=Ve(e.target,P);y.current=e.target,y.current.setAttribute("width",i.width),y.current.setAttribute("height",i.height),r.current.scaledDimensions=i,r.current.bounds=Te(L.current,!1),r.current.ratios=Ue(r.current.bounds,i),r.current.onLoadCallback&&(r.current.onLoadCallback(),r.current.onLoadCallback=null)},ve=function(e){var i=e.pageX-r.current.offsets.x,g=e.pageY-r.current.offsets.y;i=Math.max(Math.min(i,r.current.bounds.width),0),g=Math.max(Math.min(g,r.current.bounds.height),0),ge(i*-r.current.ratios.x),he(g*-r.current.ratios.y)},We=function(e){var i=typeof e.pageX=="number"?e.pageX:e.changedTouches[0].pageX,g=typeof e.pageY=="number"?e.pageY:e.changedTouches[0].pageY;r.current.offsets=$(i,g,y.current.offsetLeft,y.current.offsetTop),le(!0),b||(r.current.eventPosition={x:e.pageX,y:e.pageY})},Y=c.useCallback(function(o){o.stopPropagation();var e=typeof o.pageX=="number"?o.pageX:o.changedTouches[0].pageX,i=typeof o.pageY=="number"?o.pageY:o.changedTouches[0].pageY,g=e-r.current.offsets.x,w=i-r.current.offsets.y;g=Math.max(Math.min(g,0),(r.current.scaledDimensions.width-r.current.bounds.width)*-1),w=Math.max(Math.min(w,0),(r.current.scaledDimensions.height-r.current.bounds.height)*-1),ge(g),he(w)},[]),ye=function(e){if(le(!1),!b){var i=Math.abs(e.pageX-r.current.eventPosition.x),g=Math.abs(e.pageY-r.current.eventPosition.y);Re(i>5||g>5)}},$e=function(e){E==="drag"&&_?ye(e):W(e)},W=function(e){!b&&e.target.classList.contains("iiz__close")||(!_||D||!j?be({},!0):A(!0)),we()},be=function(e,i){(i||e.propertyName==="opacity"&&L.current.contains(e.target))&&((M&&b||!M)&&(y.current=null,r.current=Se(),R(!1)),te(!1),ie(!1),pe(n),A(!1))},qe=function(e,i){r.current.offsets=$(window.pageXOffset,window.pageYOffset,-r.current.bounds.left,-r.current.bounds.top),ve({pageX:e,pageY:i})},He=function(e,i){var g=(e-(window.pageXOffset+r.current.bounds.left))*-r.current.ratios.x,w=(i-(window.pageYOffset+r.current.bounds.top))*-r.current.ratios.y;g=g+(D?(window.innerWidth-r.current.bounds.width)/2:0),w=w+(D?(window.innerHeight-r.current.bounds.height)/2:0),r.current.bounds=Te(L.current,D),r.current.offsets=$(0,0,0,0),Y({changedTouches:[{pageX:g,pageY:w}],preventDefault:function(){},stopPropagation:function(){}})},_e=function(e,i){ne(!0),E==="drag"?He(e,i):qe(e,i),J&&J()},we=function(){ne(!1),K&&K()},Se=function(){return{onLoadCallback:null,bounds:{},offsets:{},ratios:{},eventPosition:{},scaledDimensions:{}}},Te=function(e,i){return i?{width:window.innerWidth,height:window.innerHeight,left:0,top:0}:e.getBoundingClientRect()},$=function(e,i,g,w){return{x:e-g,y:i-w}},Ue=function(e,i){return{x:(i.width-e.width)/e.width,y:(i.height-e.height)/e.height}},je=function(e,i){return e&&window.matchMedia&&window.matchMedia("(max-width: "+i+"px)").matches},Ve=function(e,i){return{width:e.naturalWidth*i,height:e.naturalHeight*i}},Ee={src:Z||f,fadeDuration:D?0:j,top:Ze,left:Xe,isZoomed:_,onLoad:ze,onDragStart:E==="drag"?We:null,onDragEnd:E==="drag"?ye:null,onClose:!O&&E==="drag"?W:null,onFadeOut:Ye?be:null};return c.useEffect(function(){r.current=Se()},[]),c.useEffect(function(){je(C,k)&&R(!1)},[C,k]),c.useEffect(function(){if(y.current){var o=b?"touchmove":"mousemove";oe?y.current.addEventListener(o,Y,{passive:!0}):y.current.removeEventListener(o,Y)}},[oe,b,Y]),h.createElement("figure",{className:"iiz "+(E==="drag"?"iiz--drag":"")+" "+(F||""),style:{width:a},ref:L,onTouchStart:_?null:Ae,onClick:xe,onMouseEnter:b?null:Be,onMouseMove:E==="drag"||!_?null:ve,onMouseLeave:b?null:$e},h.createElement(ke,{src:f,sources:u,width:a,height:x,hasSpacer:z,imgAttributes:S,fadeDuration:j,isZoomed:_}),Fe&&h.createElement(c.Fragment,null,D?h.createElement(Ie,null,h.createElement(G,Ee)):h.createElement(G,Ee)),!B&&!_&&h.createElement("span",{className:"iiz__btn iiz__hint"}))};Oe.propTypes={};const ht=()=>{const d=et(),{pizzaData:t,pizzaPrice:p,selectedIngridients:n,pizzasForDelivery:l,selectedPizza:m}=Me(),{pizzaTitle:f}=Ce(),u=tt(),a=t.find(T=>V(T.pizza_title,{lower:!0,locale:"ru"})===f),{addPizza:x,deletePizza:z,addToBasketCart:v,changePizzaPrice:S,resetPizzaCounter:Z}=nt.actions,{resetIngridientCounter:N}=rt.actions,P=n.reduce((T,j)=>T+j.ingridient_price*j.ingridient_counter,0),M=(T,j,C,I,k,O,B,F)=>{d(v({pizza_title:T,pizza_counter:j,pizza_id:C,pizza_price:I,pizza_img:k,selectedIngridients:O,totalIngridientPrice:B,pizza_descr:F})),d(N())};return c.useEffect(()=>{d(Z()),d(N())},[u.pathname]),c.useEffect(()=>{a!=null&&a.pizza_price&&d(S({pizza_price:a.pizza_price,pizza_counter:a.pizza_counter,ingridient_price:P}))},[a]),c.useEffect(()=>{console.log("Выбранные ингридиенты",n),console.log("Выбранные пиццы",m),console.log("Пиццы для заказа(уже в массиве корзины)",l)},[n,l,m]),s.jsxs("section",{className:"pizza-item",children:[s.jsx("div",{className:"pizza-item__container md:w-3/4 xs:w-11/12 mx-auto my-12 flex justify-center",children:a&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"pizza-item__wrap flex justify-center gap-x-8 lg:flex-nowrap xm:flex-wrap xs:flex-wrap",children:[s.jsx(Oe,{src:a.pizza_img,className:"w-max-[700px] h-max"}),s.jsxs("div",{className:"flex-col flex",children:[s.jsx("h1",{className:"pizza-item__wrap pizza-item__title text-black font-extrabold md:text-3xl xs:text-2xl mt-2 font-nunito uppercase",children:a.pizza_title}),s.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Традиційне тісто 40 см, ",a.pizza_weight," г"]}),s.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Кількість в порції: ",a==null?void 0:a.amount]}),s.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Склад: ",a.pizza_descr]}),s.jsxs("div",{className:"flex md:justify-start xm:justify-center xs:justify-center flex-wrap py-8 xs:gap-x-5 xs:gap-y-5 w-full",children:[s.jsxs("div",{className:"flex",children:[s.jsx("button",{disabled:a.pizza_counter===1,onClick:()=>d(z({pizza_title:a.pizza_title,pizza_counter:a.pizza_counter,pizza_id:a.id,pizza_price:a.pizza_price,totalIngridientPrice:P,selectedIngridients:n})),type:"button",className:"md:py-2 md:px-4 xs:py-1 xs:px-2 inline-flex justify-center items-center gap-2 -ml-px first:rounded-l-lg first:ml-0 last:rounded-r-lg border font-medium bg-white text-gray-900 align-middle hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 focus:ring-indigo-600 transition-all md:text-sm",children:s.jsx(it,{})}),s.jsx("button",{type:"button",className:"md:py-2 md:px-4 xs:py-1 xs:px-3 inline-flex justify-center items-center gap-2 -ml-px first:rounded-l-lg first:ml-0 last:rounded-r-lg border font-medium bg-white text-gray-900 align-middle hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 transition-all text-sm",children:a.pizza_counter}),s.jsx("button",{onClick:()=>d(x({pizza_title:a.pizza_title,pizza_counter:a.pizza_counter,pizza_id:a.id,pizza_price:a.pizza_price,totalIngridientPrice:P,selectedIngridients:n})),type:"button",className:"md:py-2 md:px-4 xs:py-1 xs:px-2 inline-flex justify-center items-center gap-2 -ml-px first:rounded-l-lg first:ml-0 last:rounded-r-lg border font-medium bg-white text-gray-900 align-middle hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 focus:ring-indigo-600 transition-all text-sm",children:s.jsx(st,{})})]}),s.jsxs("div",{className:"text-orange-500 md:px-6 md:py-2 xs:px-8 xs:py-3 tracking-widest uppercase font-normal md:text-2xl xs:text-xl flex justify-center items-center font-nunito",children:[p," грн"]}),s.jsxs("button",{onClick:()=>M(a.pizza_title,a.pizza_counter,a.id,a.pizza_price,a.pizza_img,n,P,a.pizza_descr),disabled:a.pizza_counter<=0,className:`px-6 py-4 md:w-max xs:w-full tracking-widest uppercase font-bold text-xs flex justify-center items-center font-nunito transition duration-300 ${a.pizza_counter<=0?"bg-transparent text-black border-[1px] border-neutral-500 shadow-[inset_0_0_0_2px_#616467] hover:bg-neutral-200 hover:text-black":"bg-gradient-to-r from-red-400 to-red-600 text-white shadow-lg hover:from-red-500 hover:to-red-700"}`,children:["Додати до кошику ",s.jsx(at,{className:"ml-2",size:"2em"})]})]})]})]})})}),s.jsx("div",{className:"pizza-item__recommendations",children:s.jsx(ot,{})})]})};export{ht as default};
