import{i as Ue,R as g,r as c,f as Ve,u as Ge,s as Je,a as Ke,b as Qe,c as et,j as l,G as tt,d as at,k as nt}from"./index-C0En3c42.js";import{L as rt,F as it,T as st}from"./tipsPizza-QFe4P_50.js";var $={exports:{}},H,Pe;function ot(){if(Pe)return H;Pe=1;var u="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return H=u,H}var U,De;function ct(){if(De)return U;De=1;var u=ot();function t(){}function p(){}return p.resetWarningCache=t,U=function(){function n(y,h,a,f,z,x){if(x!==u){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}n.isRequired=n;function o(){return n}var d={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:o,element:n,elementType:n,instanceOf:o,node:n,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:p,resetWarningCache:t};return d.PropTypes=d,d},U}var je;function lt(){return je||(je=1,$.exports=ct()()),$.exports}var ut=lt();const pt=Ue(ut);function X(){return X=Object.assign||function(u){for(var t=1;t<arguments.length;t++){var p=arguments[t];for(var n in p)Object.prototype.hasOwnProperty.call(p,n)&&(u[n]=p[n])}return u},X.apply(this,arguments)}var Me=function(t){var p=t.src,n=t.sources,o=t.width,d=t.height,y=t.hasSpacer,h=t.imgAttributes,a=t.isZoomed,f=t.fadeDuration,z=o&&d&&y;return g.createElement("div",{style:{paddingTop:z?d/o*100+"%":null}},n&&n.length>0?g.createElement("picture",null,n.map(function(x,S){return g.createElement(c.Fragment,{key:S},x.srcSet&&g.createElement("source",x))}),g.createElement("img",X({},h,{className:"iiz__img "+(h.className||"")+" "+(a?"iiz__img--hidden":"")+" "+(z?"iiz__img--abs":""),style:{transition:"opacity 0ms linear "+(a?f:0)+"ms, visibility 0ms linear "+(a?f:0)+"ms"},src:p,width:o,height:d}))):g.createElement("img",X({},h,{className:"iiz__img "+(h.className||"")+" "+(a?"iiz__img--hidden":"")+" "+(z?"iiz__img--abs":""),style:{transition:"opacity 0ms linear "+(a?f:0)+"ms, visibility 0ms linear "+(a?f:0)+"ms"},src:p,width:o,height:d})))};Me.propTypes={};var V=function(t){var p=t.src,n=t.fadeDuration,o=t.top,d=t.left,y=t.isZoomed,h=t.onLoad,a=t.onDragStart,f=t.onDragEnd,z=t.onClose,x=t.onFadeOut;return g.createElement(c.Fragment,null,g.createElement("img",{className:"iiz__zoom-img "+(y?"iiz__zoom-img--visible":""),style:{top:o,left:d,transition:"opacity "+n+"ms linear, visibility "+n+"ms linear"},src:p,onLoad:h,onTouchStart:a,onTouchEnd:f,onMouseDown:a,onMouseUp:f,onTransitionEnd:x,draggable:"false",alt:""}),z&&g.createElement("button",{className:"iiz__btn iiz__close "+(y?"iiz__close--visible":""),style:{transition:"opacity "+n+"ms linear, visibility "+n+"ms linear"},onClick:z,"aria-label":"Zoom Out"}))};V.propTypes={};var Ce=function(t){var p=t.children,n=c.useState(function(){var d=document.createElement("div");return d.classList.add("iiz__zoom-portal"),d}),o=n[0];return c.useEffect(function(){return document.body.appendChild(o),function(){return document.body.removeChild(o)}},[o]),Ve.createPortal(p,o)};Ce.propTypes={children:pt.element};var dt=void 0,Ne=function(t){var p=t.moveType,n=p===void 0?"pan":p,o=t.zoomType,d=o===void 0?"click":o,y=t.src,h=t.sources,a=t.width,f=t.height,z=t.hasSpacer,x=t.imgAttributes,S=x===void 0?{}:x,Z=t.zoomSrc,M=t.zoomScale,D=M===void 0?1:M,C=t.zoomPreload,T=t.fadeDuration,E=T===void 0?150:T,N=t.fullscreenOnMobile,k=t.mobileBreakpoint,O=k===void 0?640:k,F=t.hideCloseButton,B=t.hideHint,I=t.className,G=t.afterZoomIn,J=t.afterZoomOut,L=c.useRef(null),v=c.useRef(null),r=c.useRef({}),K=c.useState(C),Oe=K[0],R=K[1],Q=c.useState(!1),b=Q[0],ee=Q[1],te=c.useState(!1),_=te[0],ae=te[1],ne=c.useState(!1),j=ne[0],re=ne[1],ie=c.useState(!1),se=ie[0],oe=ie[1],ce=c.useState(!1),ke=ce[0],Fe=ce[1],le=c.useState(!1),Ie=le[0],A=le[1],ue=c.useState(n),P=ue[0],pe=ue[1],de=c.useState(0),Le=de[0],me=de[1],ge=c.useState(0),Re=ge[0],fe=ge[1],Ye=function(e){R(!0),A(!1),d==="hover"&&!_&&he(e)},Xe=function(){ee(!0),re(Te(N,O)),pe("drag")},he=function(e){if(_){b?F&&W(e):!ke&&_e();return}b&&R(!0),v.current?(ze({target:v.current}),be(e.pageX,e.pageY)):r.current.onLoadCallback=be.bind(dt,e.pageX,e.pageY)},ze=function(e){var i=$e(e.target,D);v.current=e.target,v.current.setAttribute("width",i.width),v.current.setAttribute("height",i.height),r.current.scaledDimensions=i,r.current.bounds=Se(L.current,!1),r.current.ratios=qe(r.current.bounds,i),r.current.onLoadCallback&&(r.current.onLoadCallback(),r.current.onLoadCallback=null)},xe=function(e){var i=e.pageX-r.current.offsets.x,m=e.pageY-r.current.offsets.y;i=Math.max(Math.min(i,r.current.bounds.width),0),m=Math.max(Math.min(m,r.current.bounds.height),0),me(i*-r.current.ratios.x),fe(m*-r.current.ratios.y)},Ze=function(e){var i=typeof e.pageX=="number"?e.pageX:e.changedTouches[0].pageX,m=typeof e.pageY=="number"?e.pageY:e.changedTouches[0].pageY;r.current.offsets=q(i,m,v.current.offsetLeft,v.current.offsetTop),oe(!0),b||(r.current.eventPosition={x:e.pageX,y:e.pageY})},Y=c.useCallback(function(s){s.stopPropagation();var e=typeof s.pageX=="number"?s.pageX:s.changedTouches[0].pageX,i=typeof s.pageY=="number"?s.pageY:s.changedTouches[0].pageY,m=e-r.current.offsets.x,w=i-r.current.offsets.y;m=Math.max(Math.min(m,0),(r.current.scaledDimensions.width-r.current.bounds.width)*-1),w=Math.max(Math.min(w,0),(r.current.scaledDimensions.height-r.current.bounds.height)*-1),me(m),fe(w)},[]),ve=function(e){if(oe(!1),!b){var i=Math.abs(e.pageX-r.current.eventPosition.x),m=Math.abs(e.pageY-r.current.eventPosition.y);Fe(i>5||m>5)}},Be=function(e){P==="drag"&&_?ve(e):W(e)},W=function(e){!b&&e.target.classList.contains("iiz__close")||(!_||j||!E?ye({},!0):A(!0)),_e()},ye=function(e,i){(i||e.propertyName==="opacity"&&L.current.contains(e.target))&&((C&&b||!C)&&(v.current=null,r.current=we(),R(!1)),ee(!1),re(!1),pe(n),A(!1))},Ae=function(e,i){r.current.offsets=q(window.pageXOffset,window.pageYOffset,-r.current.bounds.left,-r.current.bounds.top),xe({pageX:e,pageY:i})},We=function(e,i){var m=(e-(window.pageXOffset+r.current.bounds.left))*-r.current.ratios.x,w=(i-(window.pageYOffset+r.current.bounds.top))*-r.current.ratios.y;m=m+(j?(window.innerWidth-r.current.bounds.width)/2:0),w=w+(j?(window.innerHeight-r.current.bounds.height)/2:0),r.current.bounds=Se(L.current,j),r.current.offsets=q(0,0,0,0),Y({changedTouches:[{pageX:m,pageY:w}],preventDefault:function(){},stopPropagation:function(){}})},be=function(e,i){ae(!0),P==="drag"?We(e,i):Ae(e,i),G&&G()},_e=function(){ae(!1),J&&J()},we=function(){return{onLoadCallback:null,bounds:{},offsets:{},ratios:{},eventPosition:{},scaledDimensions:{}}},Se=function(e,i){return i?{width:window.innerWidth,height:window.innerHeight,left:0,top:0}:e.getBoundingClientRect()},q=function(e,i,m,w){return{x:e-m,y:i-w}},qe=function(e,i){return{x:(i.width-e.width)/e.width,y:(i.height-e.height)/e.height}},Te=function(e,i){return e&&window.matchMedia&&window.matchMedia("(max-width: "+i+"px)").matches},$e=function(e,i){return{width:e.naturalWidth*i,height:e.naturalHeight*i}},Ee={src:Z||y,fadeDuration:j?0:E,top:Re,left:Le,isZoomed:_,onLoad:ze,onDragStart:P==="drag"?Ze:null,onDragEnd:P==="drag"?ve:null,onClose:!F&&P==="drag"?W:null,onFadeOut:Ie?ye:null};return c.useEffect(function(){r.current=we()},[]),c.useEffect(function(){Te(N,O)&&R(!1)},[N,O]),c.useEffect(function(){if(v.current){var s=b?"touchmove":"mousemove";se?v.current.addEventListener(s,Y,{passive:!0}):v.current.removeEventListener(s,Y)}},[se,b,Y]),g.createElement("figure",{className:"iiz "+(P==="drag"?"iiz--drag":"")+" "+(I||""),style:{width:a},ref:L,onTouchStart:_?null:Xe,onClick:he,onMouseEnter:b?null:Ye,onMouseMove:P==="drag"||!_?null:xe,onMouseLeave:b?null:Be},g.createElement(Me,{src:y,sources:h,width:a,height:f,hasSpacer:z,imgAttributes:S,fadeDuration:E,isZoomed:_}),Oe&&g.createElement(c.Fragment,null,j?g.createElement(Ce,null,g.createElement(V,Ee)):g.createElement(V,Ee)),!B&&!_&&g.createElement("span",{className:"iiz__btn iiz__hint"}))};Ne.propTypes={};const ft=()=>{const u=Ge(),{pizzaData:t,pizzaPrice:p,selectedIngridients:n,pizzasForDelivery:o,selectedPizza:d}=Je(),{pizzaTitle:y}=Ke(),h=Qe(),a=t.find(T=>et(T.pizza_title,{lower:!0,locale:"ru"})===y),{addPizza:f,deletePizza:z,addToBasketCart:x,changePizzaPrice:S,resetPizzaCounter:Z}=at.actions,{resetIngridientCounter:M}=nt.actions,D=n.reduce((T,E)=>T+E.ingridient_price*E.ingridient_counter,0),C=(T,E,N,k,O,F,B,I)=>{u(x({pizza_title:T,pizza_counter:E,pizza_id:N,pizza_price:k,pizza_img:O,selectedIngridients:F,totalIngridientPrice:B,pizza_descr:I})),u(M())};return c.useEffect(()=>{u(Z()),u(M())},[h.pathname]),c.useEffect(()=>{a!=null&&a.pizza_price&&u(S({pizza_price:a.pizza_price,pizza_counter:a.pizza_counter,ingridient_price:D}))},[a]),c.useEffect(()=>{console.log("Выбранные ингридиенты",n),console.log("Выбранные пиццы",d),console.log("Пиццы для заказа(уже в массиве корзины)",o)},[n,o,d]),l.jsxs("section",{className:"pizza-item",children:[l.jsx("div",{className:"pizza-item__container md:w-3/4 xs:w-11/12 mx-auto my-12 flex justify-center",children:a&&l.jsx(l.Fragment,{children:l.jsxs("div",{className:"pizza-item__wrap flex justify-center gap-x-8 lg:flex-nowrap xm:flex-wrap xs:flex-wrap",children:[l.jsx(Ne,{src:a.pizza_img,className:"w-max-[700px] h-max"}),l.jsxs("div",{className:"flex-col flex",children:[l.jsx("h1",{className:"pizza-item__wrap pizza-item__title text-black font-extrabold md:text-3xl xs:text-2xl mt-2 font-nunito uppercase",children:a.pizza_title}),l.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Традиційне тісто 40 см, ",a.pizza_weight," г"]}),l.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Кількість в порції: ",a==null?void 0:a.amount]}),l.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Склад: ",a.pizza_descr]}),l.jsxs("div",{className:"flex md:justify-start xm:justify-center xs:justify-center flex-wrap py-8 xs:gap-x-5 xs:gap-y-5 w-full",children:[l.jsxs("div",{className:"flex",children:[l.jsx("button",{disabled:a.pizza_counter===1,onClick:()=>u(z({pizza_title:a.pizza_title,pizza_counter:a.pizza_counter,pizza_id:a.id,pizza_price:a.pizza_price,totalIngridientPrice:D,selectedIngridients:n})),type:"button",className:"md:py-2 md:px-4 xs:py-1 xs:px-2 inline-flex justify-center items-center gap-2 -ml-px first:rounded-l-lg first:ml-0 last:rounded-r-lg border font-medium bg-white text-gray-900 align-middle hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 focus:ring-indigo-600 transition-all md:text-sm",children:l.jsx(rt,{})}),l.jsx("button",{type:"button",className:"md:py-2 md:px-4 xs:py-1 xs:px-3 inline-flex justify-center items-center gap-2 -ml-px first:rounded-l-lg first:ml-0 last:rounded-r-lg border font-medium bg-white text-gray-900 align-middle hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 transition-all text-sm",children:a.pizza_counter}),l.jsx("button",{onClick:()=>u(f({pizza_title:a.pizza_title,pizza_counter:a.pizza_counter,pizza_id:a.id,pizza_price:a.pizza_price,totalIngridientPrice:D,selectedIngridients:n})),type:"button",className:"md:py-2 md:px-4 xs:py-1 xs:px-2 inline-flex justify-center items-center gap-2 -ml-px first:rounded-l-lg first:ml-0 last:rounded-r-lg border font-medium bg-white text-gray-900 align-middle hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 focus:ring-indigo-600 transition-all text-sm",children:l.jsx(it,{})})]}),l.jsxs("div",{className:"text-orange-500 md:px-6 md:py-2 xs:px-8 xs:py-3 tracking-widest uppercase font-normal md:text-2xl xs:text-xl flex justify-center items-center font-nunito",children:[p," грн"]}),l.jsxs("button",{onClick:()=>C(a.pizza_title,a.pizza_counter,a.id,a.pizza_price,a.pizza_img,n,D,a.pizza_descr),disabled:a.pizza_counter<=0,className:`px-6 py-4 md:w-max xs:w-full tracking-widest uppercase font-bold text-xs flex justify-center items-center font-nunito transition duration-300 ${a.pizza_counter<=0?"bg-transparent text-black border-[1px] border-neutral-500 shadow-[inset_0_0_0_2px_#616467] hover:bg-neutral-200 hover:text-black":"bg-gradient-to-r from-red-400 to-red-600 text-white shadow-lg hover:from-red-500 hover:to-red-700"}`,children:["Додати до кошику ",l.jsx(tt,{className:"ml-2",size:"2em"})]})]})]})]})})}),l.jsx("div",{className:"pizza-item__recommendations",children:l.jsx(st,{})})]})};export{ft as default};
