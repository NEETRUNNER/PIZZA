import{S as Ne,v as Me,w as ke,r as c,q as Oe,U as Ce,V as et,W as tt,n as o,x as q,X as at,L as nt,O as rt,Y as h,G as it,z as st,A as ot}from"./index-Coy1re3F.js";import{R as ct}from"./rating.esm-DiuYSsIj.js";const lt=()=>{const{recomendationPizzas:m}=Ne(),t=Me(),d=ke(),[a]=c.useState(!0),{pizzaTitle:l}=Oe();c.useEffect(()=>{d(Ce({page:1,limit:20}))},[]);const p=et(a,{from:{transform:"rotateY(90deg)",opacity:0},enter:{transform:"rotateY(0deg)",opacity:1},leave:{transform:"rotateY(90deg)",opacity:0},config:{duration:300}});return c.useEffect(()=>{d(tt())},[t.pathname]),c.useEffect(()=>{console.log(m)},[m]),p((f,x)=>x&&o.jsx("div",{className:"recomendation-pizza",children:o.jsxs("div",{className:"md:w-3/4 xs:w-full mx-auto px-4 py-8",children:[o.jsx("h2",{className:"md:text-4xl xs:text-2xl font-bold text-black font-nunito border-b-2 w-max",children:"Інші піцци"}),o.jsx("div",{className:"flex flex-wrap md:justify-center gap-x-24 xs:justify-between gap-y-8 md:mt-12 xs:mt-6",children:m.filter(u=>q(u.pizza_title,{lower:!0,locale:"ru"})!==l).map(u=>o.jsxs(at.div,{style:f,className:"pizza-block__item md:max-w-[600px] xs:w-full my-4 relative",children:[o.jsxs("div",{className:"flex justify-between items-center w-full md:absolute xs:relative",children:[o.jsx("h1",{className:"text-black md:text-2xl xs:text-md w-max font-nunito uppercase font-extrabold p-1",children:u.pizza_title}),o.jsx(ct,{value:u.rating,cancel:!1,className:"custom-rating px-2 h-12",style:{color:"#FFA500"}})]}),o.jsx(nt,{to:`/pizza-list/${q(u.pizza_title,{lower:!0,locale:"ru"})}`,children:o.jsx("img",{alt:"pizza_img",src:u.pizza_img,className:"w-max"})})]},u.id))})]})}))};var A={exports:{}},B,je;function ut(){if(je)return B;je=1;var m="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return B=m,B}var W,De;function dt(){if(De)return W;De=1;var m=ut();function t(){}function d(){}return d.resetWarningCache=t,W=function(){function a(f,x,u,z,v,y){if(y!==m){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}a.isRequired=a;function l(){return a}var p={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:l,element:a,elementType:a,instanceOf:l,node:a,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:d,resetWarningCache:t};return p.PropTypes=p,p},W}var Pe;function pt(){return Pe||(Pe=1,A.exports=dt()()),A.exports}var mt=pt();const ft=rt(mt);function F(){return F=Object.assign||function(m){for(var t=1;t<arguments.length;t++){var d=arguments[t];for(var a in d)Object.prototype.hasOwnProperty.call(d,a)&&(m[a]=d[a])}return m},F.apply(this,arguments)}var Fe=function(t){var d=t.src,a=t.sources,l=t.width,p=t.height,f=t.hasSpacer,x=t.imgAttributes,u=t.isZoomed,z=t.fadeDuration,v=l&&p&&f;return h.createElement("div",{style:{paddingTop:v?p/l*100+"%":null}},a&&a.length>0?h.createElement("picture",null,a.map(function(y,r){return h.createElement(c.Fragment,{key:r},y.srcSet&&h.createElement("source",y))}),h.createElement("img",F({},x,{className:"iiz__img "+(x.className||"")+" "+(u?"iiz__img--hidden":"")+" "+(v?"iiz__img--abs":""),style:{transition:"opacity 0ms linear "+(u?z:0)+"ms, visibility 0ms linear "+(u?z:0)+"ms"},src:d,width:l,height:p}))):h.createElement("img",F({},x,{className:"iiz__img "+(x.className||"")+" "+(u?"iiz__img--hidden":"")+" "+(v?"iiz__img--abs":""),style:{transition:"opacity 0ms linear "+(u?z:0)+"ms, visibility 0ms linear "+(u?z:0)+"ms"},src:d,width:l,height:p})))};Fe.propTypes={};var $=function(t){var d=t.src,a=t.fadeDuration,l=t.top,p=t.left,f=t.isZoomed,x=t.onLoad,u=t.onDragStart,z=t.onDragEnd,v=t.onClose,y=t.onFadeOut;return h.createElement(c.Fragment,null,h.createElement("img",{className:"iiz__zoom-img "+(f?"iiz__zoom-img--visible":""),style:{top:l,left:p,transition:"opacity "+a+"ms linear, visibility "+a+"ms linear"},src:d,onLoad:x,onTouchStart:u,onTouchEnd:z,onMouseDown:u,onMouseUp:z,onTransitionEnd:y,draggable:"false",alt:""}),v&&h.createElement("button",{className:"iiz__btn iiz__close "+(f?"iiz__close--visible":""),style:{transition:"opacity "+a+"ms linear, visibility "+a+"ms linear"},onClick:v,"aria-label":"Zoom Out"}))};$.propTypes={};var Re=function(t){var d=t.children,a=c.useState(function(){var p=document.createElement("div");return p.classList.add("iiz__zoom-portal"),p}),l=a[0];return c.useEffect(function(){return document.body.appendChild(l),function(){return document.body.removeChild(l)}},[l]),it.createPortal(d,l)};Re.propTypes={children:ft.element};var gt=void 0,Le=function(t){var d=t.moveType,a=d===void 0?"pan":d,l=t.zoomType,p=l===void 0?"click":l,f=t.src,x=t.sources,u=t.width,z=t.height,v=t.hasSpacer,y=t.imgAttributes,r=y===void 0?{}:y,R=t.zoomSrc,E=t.zoomScale,L=E===void 0?1:E,D=t.zoomPreload,M=t.fadeDuration,P=M===void 0?150:M,N=t.fullscreenOnMobile,H=t.mobileBreakpoint,I=H===void 0?640:H,U=t.hideCloseButton,Ie=t.hideHint,V=t.className,G=t.afterZoomIn,J=t.afterZoomOut,k=c.useRef(null),b=c.useRef(null),n=c.useRef({}),K=c.useState(D),Ye=K[0],O=K[1],Q=c.useState(!1),_=Q[0],ee=Q[1],te=c.useState(!1),w=te[0],ae=te[1],ne=c.useState(!1),j=ne[0],re=ne[1],ie=c.useState(!1),se=ie[0],oe=ie[1],ce=c.useState(!1),Xe=ce[0],Ze=ce[1],le=c.useState(!1),Ae=le[0],Y=le[1],ue=c.useState(a),T=ue[0],de=ue[1],pe=c.useState(0),Be=pe[0],me=pe[1],fe=c.useState(0),We=fe[0],ge=fe[1],qe=function(e){O(!0),Y(!1),p==="hover"&&!w&&he(e)},$e=function(){ee(!0),re(Te(N,I)),de("drag")},he=function(e){if(w){_?U&&X(e):!Xe&&_e();return}_&&O(!0),b.current?(xe({target:b.current}),be(e.pageX,e.pageY)):n.current.onLoadCallback=be.bind(gt,e.pageX,e.pageY)},xe=function(e){var i=Ke(e.target,L);b.current=e.target,b.current.setAttribute("width",i.width),b.current.setAttribute("height",i.height),n.current.scaledDimensions=i,n.current.bounds=Se(k.current,!1),n.current.ratios=Je(n.current.bounds,i),n.current.onLoadCallback&&(n.current.onLoadCallback(),n.current.onLoadCallback=null)},ze=function(e){var i=e.pageX-n.current.offsets.x,g=e.pageY-n.current.offsets.y;i=Math.max(Math.min(i,n.current.bounds.width),0),g=Math.max(Math.min(g,n.current.bounds.height),0),me(i*-n.current.ratios.x),ge(g*-n.current.ratios.y)},He=function(e){var i=typeof e.pageX=="number"?e.pageX:e.changedTouches[0].pageX,g=typeof e.pageY=="number"?e.pageY:e.changedTouches[0].pageY;n.current.offsets=Z(i,g,b.current.offsetLeft,b.current.offsetTop),oe(!0),_||(n.current.eventPosition={x:e.pageX,y:e.pageY})},C=c.useCallback(function(s){s.stopPropagation();var e=typeof s.pageX=="number"?s.pageX:s.changedTouches[0].pageX,i=typeof s.pageY=="number"?s.pageY:s.changedTouches[0].pageY,g=e-n.current.offsets.x,S=i-n.current.offsets.y;g=Math.max(Math.min(g,0),(n.current.scaledDimensions.width-n.current.bounds.width)*-1),S=Math.max(Math.min(S,0),(n.current.scaledDimensions.height-n.current.bounds.height)*-1),me(g),ge(S)},[]),ve=function(e){if(oe(!1),!_){var i=Math.abs(e.pageX-n.current.eventPosition.x),g=Math.abs(e.pageY-n.current.eventPosition.y);Ze(i>5||g>5)}},Ue=function(e){T==="drag"&&w?ve(e):X(e)},X=function(e){!_&&e.target.classList.contains("iiz__close")||(!w||j||!P?ye({},!0):Y(!0)),_e()},ye=function(e,i){(i||e.propertyName==="opacity"&&k.current.contains(e.target))&&((D&&_||!D)&&(b.current=null,n.current=we(),O(!1)),ee(!1),re(!1),de(a),Y(!1))},Ve=function(e,i){n.current.offsets=Z(window.pageXOffset,window.pageYOffset,-n.current.bounds.left,-n.current.bounds.top),ze({pageX:e,pageY:i})},Ge=function(e,i){var g=(e-(window.pageXOffset+n.current.bounds.left))*-n.current.ratios.x,S=(i-(window.pageYOffset+n.current.bounds.top))*-n.current.ratios.y;g=g+(j?(window.innerWidth-n.current.bounds.width)/2:0),S=S+(j?(window.innerHeight-n.current.bounds.height)/2:0),n.current.bounds=Se(k.current,j),n.current.offsets=Z(0,0,0,0),C({changedTouches:[{pageX:g,pageY:S}],preventDefault:function(){},stopPropagation:function(){}})},be=function(e,i){ae(!0),T==="drag"?Ge(e,i):Ve(e,i),G&&G()},_e=function(){ae(!1),J&&J()},we=function(){return{onLoadCallback:null,bounds:{},offsets:{},ratios:{},eventPosition:{},scaledDimensions:{}}},Se=function(e,i){return i?{width:window.innerWidth,height:window.innerHeight,left:0,top:0}:e.getBoundingClientRect()},Z=function(e,i,g,S){return{x:e-g,y:i-S}},Je=function(e,i){return{x:(i.width-e.width)/e.width,y:(i.height-e.height)/e.height}},Te=function(e,i){return e&&window.matchMedia&&window.matchMedia("(max-width: "+i+"px)").matches},Ke=function(e,i){return{width:e.naturalWidth*i,height:e.naturalHeight*i}},Ee={src:R||f,fadeDuration:j?0:P,top:We,left:Be,isZoomed:w,onLoad:xe,onDragStart:T==="drag"?He:null,onDragEnd:T==="drag"?ve:null,onClose:!U&&T==="drag"?X:null,onFadeOut:Ae?ye:null};return c.useEffect(function(){n.current=we()},[]),c.useEffect(function(){Te(N,I)&&O(!1)},[N,I]),c.useEffect(function(){if(b.current){var s=_?"touchmove":"mousemove";se?b.current.addEventListener(s,C,{passive:!0}):b.current.removeEventListener(s,C)}},[se,_,C]),h.createElement("figure",{className:"iiz "+(T==="drag"?"iiz--drag":"")+" "+(V||""),style:{width:u},ref:k,onTouchStart:w?null:$e,onClick:he,onMouseEnter:_?null:qe,onMouseMove:T==="drag"||!w?null:ze,onMouseLeave:_?null:Ue},h.createElement(Fe,{src:f,sources:x,width:u,height:z,hasSpacer:v,imgAttributes:r,fadeDuration:P,isZoomed:w}),Ye&&h.createElement(c.Fragment,null,j?h.createElement(Re,null,h.createElement($,Ee)):h.createElement($,Ee)),!Ie&&!w&&h.createElement("span",{className:"iiz__btn iiz__hint"}))};Le.propTypes={};const zt=()=>{const{pizzaPrice:m,pizzasForDelivery:t,selectedPizza:d,pizzaData:a}=Ne(),{pizzaTitle:l}=Oe(),p=Me(),f=ke();c.useEffect(()=>{f(Ce({page:1,limit:20}))},[]);const{addPizza:x,deletePizza:u,addToBasketCart:z,resetPizzaItem:v}=st.actions,{toggleAlert:y}=ot.actions,r=a.find(E=>q(E.pizza_title,{lower:!0,locale:"ru"})===l),R=(E,L,D,M,P,N)=>{f(z({pizza_title:E,pizza_counter:L,pizza_id:D,pizza_price:M,pizza_img:P,pizza_descr:N})),f(y({type:"pizza",value:!0}))};return c.useEffect(()=>{f(v({pizza_price:r==null?void 0:r.pizza_price}))},[p.pathname]),c.useEffect(()=>{console.log("Пиццы для заказа(уже в массиве корзины)",t)},[t,d]),o.jsxs("section",{className:"pizza-item",children:[o.jsx("div",{className:"pizza-item__container md:my-12 xs:my-0 md:w-3/4 xs:w-11/12 mx-auto flex justify-center",children:r&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"pizza-item__wrap flex justify-center gap-x-8 lg:flex-nowrap xm:flex-wrap xs:flex-wrap",children:[o.jsx(Le,{src:r.pizza_img,className:"image-zoom",zoomType:"hover"}),o.jsxs("div",{className:"flex-col flex",children:[o.jsx("h1",{className:"pizza-item__wrap pizza-item__title text-black font-extrabold md:text-3xl xs:text-2xl mt-2 font-nunito uppercase",children:r.pizza_title}),o.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Традиційне тісто 40 см, ",r.pizza_weight," г"]}),o.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Кількість в порції: ",r==null?void 0:r.amount]}),o.jsxs("p",{className:"pizza-item__wrap pizza-item__info text-gray-400 md:text-base xs:text-xm font-light mt-4",children:["Склад: ",r.pizza_descr]}),o.jsxs("div",{className:"flex md:justify-start xm:justify-center xs:justify-around flex-wrap py-8 xs:gap-x-5 w-full",children:[o.jsxs("div",{className:"flex justify-center items-center gap-x-4",children:[o.jsx("button",{onClick:()=>f(u({pizza_title:r.pizza_title,pizza_counter:r.pizza_counter,pizza_id:r.id,pizza_price:r.pizza_price})),disabled:r.pizza_counter===1,className:"text-black md:text-xl xs:text-lg f font-bold bg-gray-200 rounded-full md:w-10 md:h-10 xs:w-7 xs:h-7 flex items-center justify-center hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-md transition duration-200",children:"-"}),o.jsx("span",{className:"md:text-2xl xs:text-xl font-nunito font-extrabold text-gray-800",children:r.pizza_counter}),o.jsx("button",{onClick:()=>f(x({pizza_title:r.pizza_title,pizza_counter:r.pizza_counter,pizza_id:r.id,pizza_price:r.pizza_price})),className:"text-black temd:xt-xl f xs:text-lg font-bold bg-orange-400 rounded-full md:w-10 md:h-10 xs:w-7 xs:h-7 flex items-center justify-center hover:bg-orange-500 shadow-md transition duration-200",children:"+"})]}),o.jsxs("div",{className:"text-orange-500 px-2 md:py-2 xs:py-3 tracking-widest uppercase font-black md:text-2xl xs:text-xl flex justify-center items-center font-nunito",children:[m===void 0?r.pizza_price:m," грн"]}),o.jsx("button",{onClick:()=>R(r.pizza_title,r.pizza_counter,r.id,r.pizza_price,r.pizza_img,r.pizza_descr),disabled:r.pizza_counter<=0,className:`md:w-48 xs:w-full text-white md:mt-0 xs:mt-4 px-1 justify-center py-2 tracking-widest bg-orange-500 uppercase font-bold md:text-base
                                 xs:text-xm flex items-center font-nunito transition duration-300'}`,children:"Замовити"})]})]})]})})}),o.jsx("div",{className:"pizza-item__recommendations",children:o.jsx(lt,{})})]})};export{zt as default};
